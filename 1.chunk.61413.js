webpackJsonp([1],{"/HDu":function(e,t,n){"use strict";function o(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function a(e,t){return{__html:e.replace(RegExp(o(t),"gi"),"<mark>$&</mark>")}}function s(e,t,n){var a=new RegExp("(?:^|\\s)"+o(e),"i");return t.filter(function(e){return a.test(e.name)}).slice(0,n)}var i=n("eW0v");e.exports=function(e){function t(t){e.call(this,t),this.state={options:s(this.props.query,this.props.suggestions,this.props.maxSuggestionsLength)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentWillReceiveProps=function(e){this.setState({options:s(e.query,e.suggestions,e.maxSuggestionsLength)})},t.prototype.handleMouseDown=function(e,t){t.preventDefault(),this.props.addTag(e)},t.prototype.render=function(){var e=this;if(!this.props.expandable||!this.state.options.length)return null;var t=this.state.options.map(function(t,n){var o=e.props.listboxId+"-"+n,s=[];return e.props.selectedIndex===n&&s.push(e.props.classNames.suggestionActive),t.disabled&&s.push(e.props.classNames.suggestionDisabled),i.createElement("li",{id:o,key:o,role:"option",className:s.join(" "),"aria-disabled":!0===t.disabled,onMouseDown:e.handleMouseDown.bind(e,t)},i.createElement("span",{dangerouslySetInnerHTML:a(t.name,e.props.query)}))});return i.createElement("div",{className:this.props.classNames.suggestions},i.createElement("ul",{role:"listbox",id:this.props.listboxId},t))},t}(i.Component)},"7Iqb":function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n("eW0v"),s=(n("5D9O"),n("d1Ss")),i=n("zufa"),r=n("/HDu"),c={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40},u={root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled"},l=function(e){function t(t){e.call(this,t),this.state={query:"",focused:!1,expandable:!1,selectedIndex:-1,classNames:o({},u,this.props.classNames)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentWillReceiveProps=function(e){this.setState({classNames:o({},u,e.classNames)})},t.prototype.handleInput=function(e){var t=e.target.value;this.props.handleInputChange&&this.props.handleInputChange(t),this.setState({query:t})},t.prototype.handleKeyDown=function(e){var t=this.state,n=t.query,o=t.selectedIndex,a=this.props,s=a.delimiters,i=a.delimiterChars;if((s.indexOf(e.keyCode)>-1||i.indexOf(e.key)>-1)&&((n||o>-1)&&e.preventDefault(),n.length>=this.props.minQueryLength)){var r=this.suggestions.state.options.findIndex(function(e){return 0===e.name.search(new RegExp("^"+n+"$","i"))}),u=-1===o?r:o;u>-1?this.addTag(this.suggestions.state.options[u]):this.props.allowNew&&this.addTag({name:n})}e.keyCode===c.BACKSPACE&&0===n.length&&this.props.allowBackspace&&this.deleteTag(this.props.tags.length-1),e.keyCode===c.UP_ARROW&&(e.preventDefault(),this.setState(o<=0?{selectedIndex:this.suggestions.state.options.length-1}:{selectedIndex:o-1})),e.keyCode===c.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(o+1)%this.suggestions.state.options.length}))},t.prototype.handleClick=function(e){document.activeElement!==e.target&&this.input.input.focus()},t.prototype.handleBlur=function(){this.setState({focused:!1,selectedIndex:-1}),this.props.handleBlur&&this.props.handleBlur()},t.prototype.handleFocus=function(){this.setState({focused:!0}),this.props.handleFocus&&this.props.handleFocus()},t.prototype.addTag=function(e){e.disabled||(this.props.handleAddition(e),this.setState({query:"",selectedIndex:-1}))},t.prototype.deleteTag=function(e){this.props.handleDelete(e),this.setState({query:""})},t.prototype.render=function(){var e=this,t=this.props.tagComponent||s,n=this.props.tags.map(function(n,o){return a.createElement(t,{key:o,tag:n,classNames:e.state.classNames,onDelete:e.deleteTag.bind(e,o)})}),c=this.state.focused&&this.state.query.length>=this.props.minQueryLength,u=[this.state.classNames.root];return this.state.focused&&u.push(this.state.classNames.rootFocused),a.createElement("div",{className:u.join(" "),onClick:this.handleClick.bind(this)},a.createElement("div",{className:this.state.classNames.selected,"aria-live":"polite","aria-relevant":"additions removals"},n),a.createElement("div",{className:this.state.classNames.search,onBlurCapture:this.handleBlur.bind(this),onFocusCapture:this.handleFocus.bind(this),onInput:this.handleInput.bind(this),onKeyDown:this.handleKeyDown.bind(this)},a.createElement(i,o({},this.state,{ref:function(t){e.input=t},listboxId:"ReactTags-listbox",autofocus:this.props.autofocus,autoresize:this.props.autoresize,expandable:c,placeholder:this.props.placeholder})),a.createElement(r,o({},this.state,{ref:function(t){e.suggestions=t},listboxId:"ReactTags-listbox",expandable:c,suggestions:this.props.suggestions,addTag:this.addTag.bind(this),maxSuggestionsLength:this.props.maxSuggestionsLength}))))},t}(a.Component);l.defaultProps={tags:[],placeholder:"Add new tag",suggestions:[],autofocus:!0,autoresize:!0,delimiters:[c.TAB,c.ENTER],delimiterChars:[],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,allowBackspace:!0,tagComponent:null},e.exports=l},ABCk:function(e){e.exports={"react-tags":"react-tags__1sgoR","is-focused":"is-focused__3DKXl","react-tags__selected":"react-tags__selected__1KLbo","react-tags__selected-tag":"react-tags__selected-tag__2tfr2","react-tags__search":"react-tags__search__2vI7p","react-tags__suggestions":"react-tags__suggestions__3vjwO","is-active":"is-active__GCAGT","is-disabled":"is-disabled__1B5Xk"}},Fciz:function(e){e.exports={textarea:"textarea__3xwbu"}},LkVO:function(e,t,n){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function r(e,t){if(null==e)return{};var n,o,a={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||(a[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t,n,o,a){void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=null),null===I.parentNode&&document.body.appendChild(I);var s=u(e,t,n);if(null===s)return null;var i=s.paddingSize,r=s.borderSize,c=s.boxSizing,l=s.sizingStyle;Object.keys(l).forEach(function(e){I.style[e]=l[e]}),Object.keys(k).forEach(function(e){I.style.setProperty(e,k[e],"important")}),I.value=e.value||e.placeholder||"x";var p=-1/0,h=1/0,d=I.scrollHeight;"border-box"===c?d+=r:"content-box"===c&&(d-=i),I.value="x";var g=I.scrollHeight-i;return null===o&&null===a||(null!==o&&(p=g*o,"border-box"===c&&(p=p+i+r),d=Math.max(p,d)),null!==a&&(h=g*a,"border-box"===c&&(h=h+i+r),d=Math.min(h,d))),{height:d,minHeight:p,maxHeight:h,rowCount:Math.floor(d/g)}}function u(e,t,n){if(void 0===n&&(n=!1),n&&R[t])return R[t];var o=window.getComputedStyle(e);if(null===o)return null;var a=F.reduce(function(e,t){return e[t]=o.getPropertyValue(t),e},{}),s=a["box-sizing"];A&&"border-box"===s&&(a.width=parseFloat(a.width)+parseFloat(o["border-right-width"])+parseFloat(o["border-left-width"])+parseFloat(o["padding-right"])+parseFloat(o["padding-left"])+"px");var i=parseFloat(a["padding-bottom"])+parseFloat(a["padding-top"]),r=parseFloat(a["border-bottom-width"])+parseFloat(a["border-top-width"]),c={sizingStyle:a,paddingSize:i,borderSize:r,boxSizing:s};return n&&(R[t]=c),c}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n("KM04"),y=n("NHdN"),b=n.n(y),v=n("LGzG"),_=n.n(v),w=(n("5D9O"),n("s7Nv")),C=n("/QC5"),x=n("ABCk"),O=n.n(x),S=n("7Iqb"),N=n.n(S),j=function(e){function t(t,n){var a=o(this,e.call(this,t,n));return a.handleTagDelete=a.handleTagDelete.bind(a),a.handleTagAddition=a.handleTagAddition.bind(a),a.state={tags:t.tags.map(function(e){return{id:null,name:e}}),suggestions:t.suggestions.map(function(e){return{id:null,name:e}})},a}return a(t,e),t.prototype.handleTagDelete=function(e){var t=this.state,n=this.props;this.setState(function(t){var n=t.tags.slice(0);return n.splice(e,1),{tags:n}},function(){"function"==typeof n.onChange&&n.onChange(t.tags.map(function(e){return e.name}))})},t.prototype.handleTagAddition=function(e){var t=this.state,n=this.props;this.setState(function(t){return e.name=e.name.trim(),{tags:[].concat(t.tags,e)}},function(){"function"==typeof n.onChange&&n.onChange(t.tags.map(function(e){return e.name}))})},t.prototype.render=function(e){var t={root:O.a["react-tags"],rootFocused:O.a["is-focused"],selected:O.a["react-tags__selected"],selectedTag:O.a["react-tags__selected-tag"],selectedTagName:O.a["react-tags__selected-tag-name"],search:O.a["react-tags__search"],searchInput:O.a["react-tags__search-input"],suggestions:O.a["react-tags__suggestions"],suggestionActive:O.a["is-active"]};return Object(m.h)(N.a,{tags:this.state.tags,suggestions:this.state.suggestions,allowNew:!0,autofocus:!1,handleDelete:this.handleTagDelete,handleAddition:this.handleTagAddition,classNames:t,placeholder:e.placeholder,delimiterChars:[","]})},t}(m.Component),D=n("Fciz"),E=n.n(D),T=n("eW0v"),z="undefined"!=typeof window&&"undefined"!=typeof document,A=!!z&&!!document.documentElement.currentStyle,I=z&&document.createElement("textarea"),k={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},F=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],R={},M=function(e){return delete R[e]},P=function(e){return void 0===e&&(e=0),function(){return++e}}(),W=function(){},L=z&&window.requestAnimationFrame?[window.requestAnimationFrame,window.cancelAnimationFrame]:[setTimeout,clearTimeout],H=L[0],K=L[1],q=function(e){function t(t){var n;return n=e.call(this,t)||this,n._resizeLock=!1,n._onRootDOMNode=function(e){n._rootDOMNode=e,n.props.inputRef&&n.props.inputRef(e)},n._onChange=function(e){n._controlled||n._resizeComponent(),n.props.onChange(e)},n._resizeComponent=function(e){if(void 0===e&&(e=W),void 0===n._rootDOMNode)return void e();var t=c(n._rootDOMNode,n._uid,n.props.useCacheForDOMMeasurements,n.props.minRows,n.props.maxRows);if(null===t)return void e();var o=t.height,a=t.minHeight,s=t.maxHeight;if(n.rowCount=t.rowCount,n.state.height!==o||n.state.minHeight!==a||n.state.maxHeight!==s)return void n.setState({height:o,minHeight:a,maxHeight:s},e);e()},n.state={height:t.style&&t.style.height||0,minHeight:-1/0,maxHeight:1/0},n._uid=P(),n._controlled="string"==typeof t.value,n}i(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=r(e,["minRows","maxRows","onHeightChange","useCacheForDOMMeasurements","inputRef"]);return t.style=s({},t.style,{height:this.state.height}),Math.max(t.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(t.style.overflow="hidden"),T.default.createElement("textarea",s({},t,{onChange:this._onChange,ref:this._onRootDOMNode}))},n.componentDidMount=function(){var e=this;this._resizeComponent(),this._resizeListener=function(){e._resizeLock||(e._resizeLock=!0,e._resizeComponent(function(){return e._resizeLock=!1}))},window.addEventListener("resize",this._resizeListener)},n.componentWillReceiveProps=function(){var e=this;this._clearNextFrame(),this._onNextFrameActionId=H(function(){return e._resizeComponent()})},n.componentDidUpdate=function(e,t){this.state.height!==t.height&&this.props.onHeightChange(this.state.height,this)},n.componentWillUnmount=function(){this._clearNextFrame(),window.removeEventListener("resize",this._resizeListener),M(this._uid)},n._clearNextFrame=function(){K(this._onNextFrameActionId)},t}(T.default.Component);q.defaultProps={onChange:W,onHeightChange:W,useCacheForDOMMeasurements:!1};var B=q,U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G=function(e){function t(n,o){l(this,t);var a=p(this,e.call(this,n,o));return a.handleChange=a.handleChange.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a}return h(t,e),t.prototype.handleKeyDown=function(e){13===e.keyCode&&e.preventDefault()},t.prototype.handleChange=function(e){var t=e.target.value.replace(/(\r\n|\n|\r)/gm,"");this.props.onChange&&this.props.onChange(t)},t.prototype.render=function(e){return Object(m.h)(B,U({},e,{className:E.a.textarea,onChange:this.handleChange,onKeyDown:this.handleKeyDown,useCacheForDOMMeasurements:!0}))},t}(m.Component),Q=n("OA8u"),$=n("2e7r"),J=n.n($),V=function(e){var t=e.setState;return{handleSave:function(e,n,o){return t({saving:!0}),X(e.data,n),fetch(o.replace("video.mp4","meta.json"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return{data:e,saving:!1}}).catch(function(e){return{error:e,saving:!1}})}}},X=function(e,t){return J()(e,function(e,n){if(e.meta&&e.meta.id===t.id){var o=e;o.meta=t,n.parent.items[n.index]=o,n.replace(o)}},{getChildren:function(e){return e.items}}),e},Y=V;n.d(t,"MetaEditable",function(){return ee});var Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ee=function(e){function t(n,o){d(this,t);var a=g(this,e.call(this,n,o));return a.handleTitleChange=function(e){a.setState(function(t){var n=t.meta;return n.title=e,{meta:n}})},a.handlePeopleChange=function(e){a.setState(function(t){var n=t.meta;return n.people=e,{meta:n}})},a.handleTagsChange=function(e){a.setState(function(t){var n=t.meta;return n.tags=e,{meta:n}})},a.handleDescriptionChange=function(e){a.setState(function(t){var n=t.meta;return n.description=e,{meta:n}})},a.handleSubmit=function(e){e&&e.preventDefault(),a.props.handleSave(a.state.meta,a.props.src),Object(C.route)("/"+a.props.meta.id+"/"+a.props.meta.slug)},a.handleCancel=function(e){e&&e.preventDefault(),Object(C.route)(".")},a.handleKeyDown=function(e){!e.ctrlKey&&!e.metaKey||13!==e.keyCode&&10!==e.keyCode||a.handleSubmit(),27===e.keyCode&&a.handleCancel()},a.state={peopleSuggestions:[],tagsSuggestions:[],meta:Z({},n.meta)},a}return f(t,e),t.prototype.getListOfArrayKey=function(e,t){var n=this,o=[];return J()(e,function(e){if(e.meta&&e.meta[t]){var a=e.meta[t][0]&&e.meta[t][0].indexOf(",")>-1?e.meta[t][0].split(","):e.meta[t];o=n.mergeArray([o,a])}},{getChildren:function(e){return e.items}}),this.uniqueArray(o)},t.prototype.mergeArray=function(e){var t;return(t=[]).concat.apply(t,e)},t.prototype.uniqueArray=function(e){return Array.from(new Set(e))},t.prototype.componentWillMount=function(){this.setState({peopleSuggestions:this.getListOfArrayKey(this.props.data,"people"),tagsSuggestions:this.getListOfArrayKey(this.props.data,"tags")})},t.prototype.render=function(e,t){return Object(m.h)("div",{className:_.a.meta},Object(m.h)("form",{onSubmit:this.handleSubmit,className:b.a.form,onKeyDown:this.handleKeyDown},Object(m.h)("h1",null,Object(m.h)(G,{value:t.meta.title,placeholder:"Enter title...",onChange:this.handleTitleChange})),Object(m.h)("div",{className:_.a.people},Object(m.h)(w.a,{name:"person",className:_.a.icon}),Object(m.h)(j,{tags:t.meta.people,suggestions:t.peopleSuggestions,placeholder:"Add person",onChange:this.handlePeopleChange})),Object(m.h)("div",{className:_.a.tags},Object(m.h)(j,{tags:t.meta.tags,suggestions:t.tagsSuggestions,placeholder:"Add tag",onChange:this.handleTagsChange})),Object(m.h)("div",{className:_.a.description},Object(m.h)(G,{value:t.meta.description,placeholder:"Enter description...",onChange:this.handleDescriptionChange})),Object(m.h)("div",{className:b.a.buttonContainer},Object(m.h)("button",{onClick:this.handleCancel},"Cancel"),Object(m.h)("button",{type:"submit",className:b.a.saveButton+" primary"},"Save"))))},t}(m.Component),te=function(e){return{data:e.data}};t.default=Object(Q.connect)(te,Y)(ee)},NHdN:function(e){e.exports={buttonContainer:"buttonContainer__3ltan"}},d1Ss:function(e,t,n){"use strict";var o=n("eW0v");e.exports=function(e){return o.createElement("button",{type:"button",className:e.classNames.selectedTag,title:"Click to remove tag",onClick:e.onDelete},o.createElement("span",{className:e.classNames.selectedTagName},e.tag.name))}},zufa:function(e,t,n){"use strict";var o=n("eW0v"),a={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},s=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing"];e.exports=function(e){function t(t){e.call(this,t),this.state={inputWidth:null}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentDidMount=function(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth()),this.props.autofocus&&this.input.focus()},t.prototype.componentDidUpdate=function(){this.updateInputWidth()},t.prototype.componentWillReceiveProps=function(e){this.input.value!==e.query&&(this.input.value=e.query)},t.prototype.copyInputStyles=function(){var e=this,t=window.getComputedStyle(this.input);s.forEach(function(n){e.sizer.style[n]=t[n]})},t.prototype.updateInputWidth=function(){var e;this.props.autoresize&&(e=Math.ceil(this.sizer.scrollWidth)+2),e!==this.state.inputWidth&&this.setState({inputWidth:e})},t.prototype.render=function(){var e=this,t=this.props,n=t.query,s=t.placeholder,i=t.expandable,r=t.listboxId,c=t.selectedIndex;return o.createElement("div",{className:this.props.classNames.searchInput},o.createElement("input",{ref:function(t){e.input=t},value:n,placeholder:s,role:"combobox","aria-autocomplete":"list","aria-label":s,"aria-owns":r,"aria-activedescendant":c>-1?r+"-"+c:null,"aria-expanded":i,style:{width:this.state.inputWidth}}),o.createElement("div",{ref:function(t){e.sizer=t},style:a},n||s))},t}(o.Component)}});
//# sourceMappingURL=1.chunk.61413.js.map